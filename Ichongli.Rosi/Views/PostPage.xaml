<phone:PhoneApplicationPage x:Class="Ichongli.Rosi.Views.PostPage" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone" xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" xmlns:delay="clr-namespace:Delay;assembly=PhonePerformance" FontFamily="{StaticResource PhoneFontFamilyNormal}" FontSize="{StaticResource PhoneFontSizeNormal}" Foreground="{StaticResource PhoneForegroundBrush}" SupportedOrientations="Portrait" Orientation="Portrait" mc:Ignorable="d" shell:SystemTray.Opacity="0" xmlns:bab="clr-namespace:Caliburn.Micro.BindableAppBar;assembly=Caliburn.Micro.BindableAppBar" shell:SystemTray.IsVisible="True" xmlns:utilities="clr-namespace:Ichongli.Rosi.Utilities" Style="{StaticResource SilderResource}" shell:SystemTray.ForegroundColor="#427fed">

    <Grid Background="{StaticResource MainBackgroundBrush}">
        <!--LayoutRoot 是包含所有页面内容的根网格-->
        <Grid x:Name="LayoutRoot">
            <Grid.Background>
                <ImageBrush ImageSource="{Binding BigImage}" Opacity="0.1" Stretch="UniformToFill"></ImageBrush>
            </Grid.Background>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <phone:Pivot Title="DFT Marketing" Grid.RowSpan="2" HeaderTemplate="{StaticResource PivotHeader}" Background="Transparent">
                <phone:PivotItem Header="内容" Margin="0">
                    <ScrollViewer>
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="160" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Image Grid.Column="0" Margin="12,0,0,0" x:Name="ShowImage" Stretch="UniformToFill" Height="150" Width="150" utilities:ImageNodify.Source="{Binding Url}" HorizontalAlignment="Center" VerticalAlignment="Top" />
                                <StackPanel Grid.Column="1">
                                    <TextBlock VerticalAlignment="Bottom" Text="{Binding Title}" TextWrapping="Wrap" Style="{StaticResource PhoneTextTitle2Style}" Foreground="{StaticResource ThirdBackgroundBrush}" />
                                    <TextBlock VerticalAlignment="Bottom" Text="{Binding Author.Name}" TextWrapping="Wrap" Style="{StaticResource PhoneTextTitle3Style}" Foreground="{StaticResource SecondaryBackgroundBrush}" />
                                    <ItemsControl ItemsSource="{Binding Tags}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Title}" Style="{StaticResource PhoneTextNormalStyle}" Foreground="{StaticResource ThirdBackgroundBrush}" />
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <toolkit:WrapPanel />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                    </ItemsControl>
                                </StackPanel>
                            </Grid>
                            <TextBlock Text="{Binding Content}" TextWrapping="Wrap" Style="{StaticResource PhoneTextNormalStyle}" Foreground="{StaticResource ThirdBackgroundBrush}" />

                        </StackPanel>
                    </ScrollViewer>
                </phone:PivotItem>

                <!--Pivot item two-->
                <phone:PivotItem xmlns:ichongli="clr-namespace:Ichongli.Controls;assembly=Ichongli.Controls" Header="图片" Margin="0">
                    <ichongli:ThinkLonglistselector Margin="10 0 0 0" ItemsSource="{Binding Photos}" LayoutMode="Grid" x:Name="PhotoGrid" IsGroupingEnabled="False" GridCellSize="148,248">
                        <ichongli:ThinkLonglistselector.ItemTemplate>
                            <DataTemplate>
                                <Grid xmlns:micro="clr-namespace:Caliburn.Micro;assembly=Caliburn.Micro" micro:Message.Attach="[Tap]=[NaivgatoViewer($datacontext)]">
                                    <Border Background="#f5f5f5" BorderBrush="#ffffff" BorderThickness="2" Margin="0,0,10,10">
                                        <Image utilities:ImageNodify.Source="{Binding ItemImage.Thumbnail}" Width="148" Height="248" Stretch="UniformToFill" />
                                    </Border>
                                </Grid>
                            </DataTemplate>
                        </ichongli:ThinkLonglistselector.ItemTemplate>
                    </ichongli:ThinkLonglistselector>
                </phone:PivotItem>
            </phone:Pivot>
            <!--<bab:BindableAppBar x:Name="AppBar" Grid.Row="1" BarOpacity="0.3">
                <bab:BindableAppBarButton x:Name="Download" Text="下载" />
            </bab:BindableAppBar>-->
        </Grid>
    </Grid>
</phone:PhoneApplicationPage>